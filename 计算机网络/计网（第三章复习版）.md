### 第三章 数据链路层

#### 一、数据链路层（协议、数据帧）3个共同问题

1. **封装成帧**：
   - **帧定界符**：使用特定的控制字符（如SOH首和EOT尾）来标识帧的边界。
   - **帧头和帧尾**：帧头通常包含地址信息和控制信息，帧尾包含用于差错检测的信息。
2. **透明传输**：
   - **字节填充**或**字符填充**：在数据中插入额外的字符或字节，以避免数据与帧定界符或控制字符冲突。
   - **转义字符“ESC”**：用于转义那些可能与帧定界符或控制字符冲突的数据字符。
   - **零填充**：在数据中插入零字节来避免与帧定界符冲突，接收方需要识别并移除这些填充。
3. **差错检测(可靠传输)**：
   - **循环冗余检查（CRC）**：一种更复杂的差错检测方法，使用生成多项式G(x)来计算数据的CRC值。
     - **帧检验序列（FCS）**：为了进行检错而添加的冗余码（CRC）。
     - **发送方**：
       1. 根据G(x)求出除数。
       2. 根据G(x)和原始数据求出被除数。
       3. 使用模2除法，用被除数求出余数（冗余码）。
     - **接收方**：
       1. 接收端收到数据帧后，用上面选定的除数，用模2除法除去。
       2. 验证余数是否为0，如果为0，则说明数据帧没有出错。
4. **例题**:
   - <img src=".\img\计网（复习版）\3例题1.png" alt="例题1" style="zoom: 75%;" />
      - (D)(A)
      - <img src=".\img\计网（复习版）\3答案1.png" alt="答案1" style="zoom: 75%;" />




#### 二、数据链路层的协议

数据链路层的协议定义了如何在两个节点之间建立和维护数据链路，以及如何进行数据的封装、传输和差错控制。

1. **点对点协议（PPP）**：

   <img src=".\img\计网（复习版）\PPP协议的组成.png" alt="PPP协议的组成" style="zoom: 75%;" />

   <img src=".\img\计网（复习版）\PPP协议的帧格式.png" alt="PPP协议的帧格式" style="zoom: 75%;" />

   - 用于点对点链路的数据链路层协议。
   - 支持多种网络层协议，如IP。
   - 同步传输使用==零比特填充法==避免数据混淆。
     - 零比特填充:
     - <img src=".\img\计网（复习版）\零比特填充.png" alt="零比特填充" style="zoom: 75%;" />
   - 异步传输使用==字节填充法==，通过插入转义字节 7D 并减去或加上十六进制0x20。

2. **例题**:

   - <img src=".\img\计网（复习版）\3例题2.png" alt="例题2" style="zoom: 75%;" />
     - (B:连续出现5个1, 其后补0)(A:连续出现5个1, 其后补0)

3. **以太网（Ethernet）**：

   **CSMA/CD-争用期(碰撞窗口)**

   <img src=".\img\计网（复习版）\CSMA-CD协议.png" alt="CSMA-CD协议" style="zoom: 75%;" />

   - 广泛使用的局域网技术。
   - 定义了数据链路层和物理层的规范。
   - 使用CSMA/CD协议管理数据传输，避免冲突。
   - 支持不同速率，如10 Mbps, 100 Mbps, 1 Gbps等。

4. 例题:

   - <img src=".\img\计网（复习版）\3例题3.png" alt="例题3" style="zoom: 75%;" />
     - (B)(D)

